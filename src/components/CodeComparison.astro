---
// CodeComparison.astro - Side-by-side vulnerable vs fixed code
interface Props {
  vulnerable?: string;
  fixed?: string;
  language: string;
}

const { vulnerable, fixed, language } = Astro.props;
---

<div class="my-8">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    {vulnerable && (
      <div>
        <div class="text-xs font-mono text-red-400 uppercase tracking-wider mb-2">
          ❌ Vulnerable
        </div>
        <pre class="bg-slate-800 border-l-4 border-red-500 p-4 rounded text-sm overflow-x-auto">
          <code class={`language-${language}`}>
            {vulnerable}
          </code>
        </pre>
      </div>
    )}
    {fixed && (
      <div>
        <div class="text-xs font-mono text-emerald-400 uppercase tracking-wider mb-2">
          ✅ Fixed
        </div>
        <pre class="bg-slate-800 border-l-4 border-emerald-500 p-4 rounded text-sm overflow-x-auto">
          <code class={`language-${language}`}>
            {fixed}
          </code>
        </pre>
      </div>
    )}
  </div>
</div>

<style>
  pre {
    font-family: var(--font-mono, 'SF Mono', Monaco, monospace);
  }

  code {
    color: #e2e8f0;
    white-space: pre;
  }
</style>
